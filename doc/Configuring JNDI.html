<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>Configuring JNDI</title><link rel="stylesheet" type="text/css" href="Configuring%20JNDI_files/docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><meta name="keywords" content="jetty, servlet, servlet-api, cometd, http, websocket, eclipse, maven, java, server, software"><link rel="home" href="http://www.eclipse.org/jetty/documentation/current/index.html" title="Jetty : The Definitive Reference"><link rel="up" href="http://www.eclipse.org/jetty/documentation/current/jndi.html" title="Chapter&nbsp;11.&nbsp;Configuring JNDI"><link rel="prev" href="http://www.eclipse.org/jetty/documentation/current/using-jetty-jndi.html" title="Working with Jetty JNDI"><link rel="next" href="http://www.eclipse.org/jetty/documentation/current/jndi-embedded.html" title="Using JNDI with Jetty Embedded"><link xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" rel="shortcut icon" href="http://www.eclipse.org/jetty/documentation/current/images/favicon.ico"><script src="Configuring%20JNDI_files/async-ads.js" async=""></script><script src="Configuring%20JNDI_files/ga.js" async="" type="text/javascript"></script><script src="Configuring%20JNDI_files/cse.js" async="" type="text/javascript"></script><script type="text/javascript" src="Configuring%20JNDI_files/shCore.js"></script><script type="text/javascript" src="Configuring%20JNDI_files/shBrushJava.js"></script><script type="text/javascript" src="Configuring%20JNDI_files/shBrushXml.js"></script><script type="text/javascript" src="Configuring%20JNDI_files/shBrushBash.js"></script><script type="text/javascript" src="Configuring%20JNDI_files/shBrushJScript.js"></script><script type="text/javascript" src="Configuring%20JNDI_files/shBrushSql.js"></script><script type="text/javascript" src="Configuring%20JNDI_files/shBrushProperties.js"></script><script type="text/javascript" src="Configuring%20JNDI_files/shBrushPlain.js"></script><link type="text/css" rel="stylesheet" href="Configuring%20JNDI_files/shCore.css"><link type="text/css" rel="stylesheet" href="Configuring%20JNDI_files/shThemeEclipse.css"><link type="text/css" rel="stylesheet" href="Configuring%20JNDI_files/font-awesome.css"><script type="text/javascript" src="Configuring%20JNDI_files/jsapi"></script><link rel="stylesheet" href="Configuring%20JNDI_files/defaulten.css" type="text/css"><link rel="stylesheet" href="Configuring%20JNDI_files/default.css" type="text/css"><script src="Configuring%20JNDI_files/defaulten.js" type="text/javascript"></script><style type="text/css">
.gsc-control-cse {
font-family: Arial, sans-serif;
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-control-cse .gsc-table-result {
font-family: Arial, sans-serif;
}
input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
border-color: #D9D9D9;
}
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
border-color: #666666;
background-color: #CECECE;
background-image: none;
filter: none;
}
.gsc-tabHeader.gsc-tabhInactive {
border-color: #E9E9E9;
background-color: #E9E9E9;
}
.gsc-tabHeader.gsc-tabhActive {
border-color: #FF9900;
border-bottom-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-tabsArea {
border-color: #FF9900;
}
.gsc-webResult.gsc-result,
.gsc-results .gsc-imageResult {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-webResult.gsc-result:hover,
.gsc-imageResult:hover {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gs-webResult.gs-result a.gs-title:link,
.gs-webResult.gs-result a.gs-title:link b,
.gs-imageResult a.gs-title:link,
.gs-imageResult a.gs-title:link b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:visited,
.gs-webResult.gs-result a.gs-title:visited b,
.gs-imageResult a.gs-title:visited,
.gs-imageResult a.gs-title:visited b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:hover,
.gs-webResult.gs-result a.gs-title:hover b,
.gs-imageResult a.gs-title:hover,
.gs-imageResult a.gs-title:hover b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:active,
.gs-webResult.gs-result a.gs-title:active b,
.gs-imageResult a.gs-title:active,
.gs-imageResult a.gs-title:active b {
color: #0000CC;
}
.gsc-cursor-page {
color: #0000CC;
}
a.gsc-trailing-more-results:link {
color: #0000CC;
}
.gs-webResult .gs-snippet,
.gs-imageResult .gs-snippet,
.gs-fileFormatType {
color: #000000;
}
.gs-webResult div.gs-visibleUrl,
.gs-imageResult div.gs-visibleUrl {
color: #008000;
}
.gs-webResult div.gs-visibleUrl-short {
color: #008000;
}
.gs-webResult div.gs-visibleUrl-short {
display: none;
}
.gs-webResult div.gs-visibleUrl-long {
display: block;
}
.gs-promotion div.gs-visibleUrl-short {
display: none;
}
.gs-promotion div.gs-visibleUrl-long {
display: block;
}
.gsc-cursor-box {
border-color: #FFFFFF;
}
.gsc-results .gsc-cursor-box .gsc-cursor-page {
border-color: #E9E9E9;
background-color: #FFFFFF;
color: #0000CC;
}
.gsc-results .gsc-cursor-box .gsc-cursor-current-page {
border-color: #FF9900;
background-color: #FFFFFF;
color: #0000CC;
}
.gsc-webResult.gsc-result.gsc-promotion {
border-color: #336699;
background-color: #FFFFFF;
}
.gsc-completion-title {
color: #0000CC;
}
.gsc-completion-snippet {
color: #000000;
}
.gs-promotion a.gs-title:link,
.gs-promotion a.gs-title:link *,
.gs-promotion .gs-snippet a:link {
color: #0000CC;
}
.gs-promotion a.gs-title:visited,
.gs-promotion a.gs-title:visited *,
.gs-promotion .gs-snippet a:visited {
color: #0000CC;
}
.gs-promotion a.gs-title:hover,
.gs-promotion a.gs-title:hover *,
.gs-promotion .gs-snippet a:hover {
color: #0000CC;
}
.gs-promotion a.gs-title:active,
.gs-promotion a.gs-title:active *,
.gs-promotion .gs-snippet a:active {
color: #0000CC;
}
.gs-promotion .gs-snippet,
.gs-promotion .gs-title .gs-promotion-title-right,
.gs-promotion .gs-title .gs-promotion-title-right * {
color: #000000;
}
.gs-promotion .gs-visibleUrl,
.gs-promotion .gs-visibleUrl-short {
color: #008000;
}</style><style type="text/css">.gscb_a{display:inline-block;font:27px/13px arial,sans-serif}.gsst_a .gscb_a{color:#a1b9ed;cursor:pointer}.gsst_a:hover .gscb_a,.gsst_a:focus .gscb_a{color:#36c}.gsst_a{display:inline-block}.gsst_a{cursor:pointer;padding:0 4px}.gsst_a:hover{text-decoration:none!important}.gsst_b{font-size:16px;padding:0 2px;position:relative;user-select:none;-moz-user-select:none;white-space:nowrap}.gsst_e{opacity:0.55;}.gsst_a:hover .gsst_e,.gsst_a:focus .gsst_e{opacity:0.72;}.gsst_a:active .gsst_e{opacity:1;}.gsst_f{background:white;text-align:left}.gsst_g{background-color:white;border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);margin:-1px -3px;padding:0 6px}.gsst_h{background-color:white;height:1px;margin-bottom:-1px;position:relative;top:-1px}.gsib_a{width:100%;padding:4px 6px 0}.gsib_a,.gsib_b{vertical-align:top}.gssb_c{border:0;position:absolute;z-index:989}.gssb_e{border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,0.2);cursor:default}.gssb_f{visibility:hidden;white-space:nowrap}.gssb_k{border:0;display:block;position:absolute;top:0;z-index:988}.gsdd_a{border:none!important}.gsq_a{padding:0}.gscsep_a{display:none}.gssb_a{padding:0 7px}.gssb_a,.gssb_a td{white-space:nowrap;overflow:hidden;line-height:22px}#gssb_b{font-size:11px;color:#36c;text-decoration:none}#gssb_b:hover{font-size:11px;color:#36c;text-decoration:underline}.gssb_g{text-align:center;padding:8px 0 7px;position:relative}.gssb_h{font-size:15px;height:28px;margin:0.2em}.gssb_i{background:#eee}.gss_ifl{visibility:hidden;padding-left:5px}.gssb_i .gss_ifl{visibility:visible}a.gssb_j{font-size:13px;color:#36c;text-decoration:none;line-height:100%}a.gssb_j:hover{text-decoration:underline}.gssb_l{height:1px;background-color:#e5e5e5}.gssb_m{color:#000;background:#fff}.gsfe_a{border:1px solid #b9b9b9;border-top-color:#a0a0a0;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);}.gsfe_b{border:1px solid #4d90fe;outline:none;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);}.gssb_a{padding:0 9px}.gsib_a{padding-right:8px;padding-left:8px}.gsst_a{padding-top:3px}.gssb_e{border:0}.gssb_l{margin:5px 0}.gssb_c .gsc-completion-container{position:static}.gssb_c{z-index:5000}.gsc-completion-container table{background:transparent;font-size:inherit;font-family:inherit}.gssb_c > tbody > tr,.gssb_c > tbody > tr > td,.gssb_d,.gssb_d > tbody > tr,.gssb_d > tbody > tr > td,.gssb_e,.gssb_e > tbody > tr,.gssb_e > tbody > tr > td{padding:0;margin:0;border:0}.gssb_a table,.gssb_a table tr,.gssb_a table tr td{padding:0;margin:0;border:0}</style></head><body bgcolor="white" link="#0000FF" text="black" vlink="#840084" alink="#0000FF"><table xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"><tbody><tr><td style="width: 25%"><a href="http://www.eclipse.org/jetty"><img src="Configuring%20JNDI_files/jetty-header-logo.png" alt="Jetty Logo"></a><br><span style="font-size: small">
            Version: 9.3.7.v20160115</span></td><td style="width: 50%"><script type="text/javascript">  (function() {
            var cx = '016459005284625897022:obd4lsai2ds';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
            })();
          </script><div id="___gcse_0"><div class="gsc-control-cse gsc-control-cse-en"><div dir="ltr" class="gsc-control-wrapper-cse"><form accept-charset="utf-8" class="gsc-search-box gsc-search-box-tools"><table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-input"><div id="gsc-iw-id1" class="gsc-input-box"><table class="gstl_50 " id="gs_id50" style="width: 100%; padding: 0px;" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsib_a" id="gs_tti50"><input spellcheck="false" dir="ltr" id="gsc-i-id1" style="width: 100%; padding: 0px; border: medium none; margin: 0px; height: auto; outline: medium none; background: rgb(255, 255, 255) url(&quot;http://www.google.com/cse/static/en/google_custom_search_watermark.gif&quot;) no-repeat scroll left center;" title="search" name="search" class="gsc-input" size="10" autocomplete="off" type="text"></td><td class="gsib_b"><div dir="ltr" id="gs_st50" class="gsst_b"><a style="display: none;" href="javascript:void(0)" class="gsst_a"><span id="gs_cb50" class="gscb_a">×</span></a></div></td></tr></tbody></table></div><input id="bgresponse" name="bgresponse" type="hidden"></td><td class="gsc-search-button"><input title="search" class="gsc-search-button gsc-search-button-v2" src="Configuring%20JNDI_files/search_box_icon.png" type="image"></td><td class="gsc-clear-button"><div title="clear results" class="gsc-clear-button">&nbsp;</div></td></tr></tbody></table><table class="gsc-branding" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-branding-user-defined"></td><td class="gsc-branding-text"><div class="gsc-branding-text">powered by</div></td><td class="gsc-branding-img"><img class="gsc-branding-img" src="Configuring%20JNDI_files/small-logo.png"></td></tr></tbody></table></form><div class="gsc-results-wrapper-overlay"><div tabindex="0" class="gsc-results-close-btn"></div><div class="gsc-tabsAreaInvisible"><div class="gsc-tabHeader gsc-inline-block gsc-tabhActive">Custom Search</div><span class="gs-spacer"> </span></div><div class="gsc-tabsAreaInvisible"></div><div class="gsc-above-wrapper-area-invisible"><table class="gsc-above-wrapper-area-container" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-result-info-container"><div class="gsc-result-info-invisible"></div></td><td class="gsc-orderby-container"><div class="gsc-orderby-invisible"><div class="gsc-orderby-label gsc-inline-block">Sort by:</div><div class="gsc-option-menu-container gsc-inline-block"><div class="gsc-selected-option-container gsc-inline-block"><div class="gsc-selected-option">Relevance</div><div class="gsc-option-selector"></div></div><div class="gsc-option-menu-invisible"><div class="gsc-option-menu-item gsc-option-menu-item-highlighted"><div class="gsc-option">Relevance</div></div><div class="gsc-option-menu-item"><div class="gsc-option">Date</div></div></div></div></div></td></tr></tbody></table></div><div class="gsc-adBlockInvisible"></div><div class="gsc-wrapper"><div class="gsc-adBlockInvisible"></div><div class="gsc-resultsbox-invisible"><div class="gsc-resultsRoot gsc-tabData gsc-tabdActive"><table class="gsc-resultsHeader" cellpadding="0" cellspacing="0"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">Web</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-all-results-active"><div title="show one result" class="gsc-result-selector gsc-one-result">&nbsp;</div><div title="show more results" class="gsc-result-selector gsc-more-results">&nbsp;</div><div title="show all results" class="gsc-result-selector gsc-all-results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div></div></div></div><div tabindex="0" class="gsc-modal-background-image"></div></div></div></div></td></tr></tbody></table><div xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" class="navheader"><table summary="Navigation header" width="100%"><tbody><tr><th colspan="3" align="center">Configuring JNDI</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="http://www.eclipse.org/jetty/documentation/current/using-jetty-jndi.html"><i class="icon-chevron-left"></i> Previous</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;11.&nbsp;Configuring JNDI<br><a accesskey="p" href="http://www.eclipse.org/jetty/documentation/current/index.html"><i class="icon-home"></i> Home</a></th><td width="20%" align="right">&nbsp;<a accesskey="n" href="http://www.eclipse.org/jetty/documentation/current/jndi-embedded.html">Next <i class="icon-chevron-right"></i></a></td></tr></tbody></table><hr></div><div xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" class="jetty-callout"><h5 class="callout"><a href="http://www.webtide.com/">Contact the core Jetty developers at
          <span class="website">www.webtide.com</span></a></h5><p>
 private support for your internal/customer projects ... custom 
extensions and distributions ... versioned snapshots for indefinite 
support ...
 scalability guidance for your apps and Ajax/Comet projects ... 
development services from 1 day to full product delivery
      </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="jndi-configuration"></a>Configuring JNDI</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-jndi-env-entries">Configuring JNDI <code class="code">env-entries</code></a></span></dt><dt><span class="section"><a href="http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-resource-refs-and-resource-env-refs">Configuring <code class="code">resource-refs</code> and
    <code class="code">resource-env-refs</code></a></span></dt><dt><span class="section"><a href="http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-datasources">Configuring DataSources</a></span></dt><dt><span class="section"><a href="http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-jms-queues-topics-connectionfactories">Configuring JMS Queues, Topics and ConnectionFactories</a></span></dt><dt><span class="section"><a href="http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-mail-with-jndi">Configuring Mail</a></span></dt><dt><span class="section"><a href="http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-xa-transactions">Configuring XA Transactions</a></span></dt><dt><span class="section"><a href="http://www.eclipse.org/jetty/documentation/current/jndi-configuration.html#configuring-links">Configuring Links</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-jndi-env-entries"></a>Configuring JNDI <code class="code">env-entries</code></h3></div></div></div><p>Sometimes it is useful to pass configuration information to a webapp
    at runtime that you either cannot or cannot conveniently code into a
    <code class="code">web.xml env-entry</code>. In such cases, you can use <code class="code">
    org.eclipse.jetty.plus.jndi.EnvEntry</code>, and even override an entry of
    the same name in <code class="filename"> web.xml</code>.</p><div class="informalexample"><div><div id="highlighter_581408" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.EnvEntry"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;mySpecialValue&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"java.lang.Integer"</code><code class="xml plain">&gt;4000&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code> <code class="xml color1">type</code><code class="xml plain">=</code><code class="xml string">"boolean"</code><code class="xml plain">&gt;true&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>This example defines a virtual <code class="code">env-entry</code> called
    <code class="code">mySpecialValue</code> with value <code class="code">4000</code> that is <a class="link" href="http://www.eclipse.org/jetty/documentation/current/using-jetty-jndi.html#jndi-name-scope" title="Scope of Resource Names">scoped</a> to the JVM. It is put into JNDI at
    <code class="code"> java:comp/env/mySpecialValue</code> for <span class="emphasis"><em>every</em></span>
    web app deployed. Moreover, the boolean argument indicates that this value
    overrides an <code class="code">env-entry</code> of the same name in
    <code class="code">web.xml</code>. If you don't want to override, omit this
    argument, or set it to <code class="code">false</code>.</p><p>The Servlet Specification allows binding only the following object
    types to an <code class="code">env-entry</code>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> java.lang.String </p></li><li class="listitem"><p> java.lang.Integer </p></li><li class="listitem"><p> java.lang.Float </p></li><li class="listitem"><p> java.lang.Double </p></li><li class="listitem"><p> java.lang.Long </p></li><li class="listitem"><p> java.lang.Short </p></li><li class="listitem"><p> java.lang.Character </p></li><li class="listitem"><p> java.lang.Byte </p></li><li class="listitem"><p> java.lang.Boolean </p></li></ul></div><p>That being said, Jetty is a little more flexible and allows you to
    also bind custom POJOs, <a class="link" href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/naming/Reference.html" target="_top">
    <code class="code">javax.naming.References</code></a> and <a class="link" href="http://docs.oracle.com/javase/1.5.0/docs/api/javax/naming/Referenceable.html" target="_top">
    <code class="code">javax.naming.Referenceables</code></a>. Be aware that if you take
    advantage of this feature, your web application is <span class="emphasis"><em>not
    portable</em></span>.</p><p>To use the <code class="code">env-entry</code> configured above, use code in your
    <code class="filename">servlet/filter/etc.</code>, such as:</p><div class="informalexample"><div><div id="highlighter_309576" class="syntaxhighlighter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">javax.naming.InitialContext;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">MyClass {</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">myMethod() {</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">InitialContext ic = </code><code class="java keyword">new</code> <code class="java plain">InitialContext();</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Integer mySpecialValue = (Integer)ic.lookup(</code><code class="java string">"java:comp/env/mySpecialValue"</code><code class="java plain">);</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">...</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number11 index10 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-resource-refs-and-resource-env-refs"></a>Configuring <code class="code">resource-refs</code> and
    <code class="code">resource-env-refs</code></h3></div></div></div><p>You can configure any type of resource that you want to refer to in
    a <code class="code">web.xml</code> file as a <code class="code">resource-ref</code> or
    <code class="code">resource-env-ref</code>, using the <code class="code">
    org.eclipse.jetty.plus.jndi.Resource</code> type of naming entry. You
    provide the scope, the name of the object (relative to
    <code class="code">java:comp/env</code>) and a POJO instance or a
    <code class="code">javax.naming.Reference</code> instance or
    <code class="code">javax.naming.Referenceable</code> instance.</p><p>The <a class="link" href="http://jcp.org/aboutJava/communityprocess/pr/jsr244/index.html" target="_top">J2EE
    Specification</a> recommends storing DataSources in
    <code class="code">java:comp/env/jdbc</code>, JMS connection factories under
    <code class="code">java:comp/env/jms</code>, JavaMail connection factories under <code class="code">
    java:comp/env/mail</code> and URL connection factories under
    <code class="code">java:comp/env/url</code>. For example:</p><div class="table"><a name="d0e10783"></a><p class="title"><b>Table&nbsp;11.1.&nbsp;DataSource Declaration Conventions</b></p><div class="table-contents"><table summary="DataSource Declaration Conventions" border="1" width="100%"><colgroup><col><col><col></colgroup><thead><tr><th align="center">Resource Type</th><th align="center">Name in <code class="code">jetty.xml</code></th><th align="center">Environment Lookup</th></tr></thead><tbody><tr><td>javax.sql.DataSource</td><td>jdbc/myDB</td><td>java:comp/env/jdbc/myDB</td></tr><tr><td>javax.jms.QueueConnectionFactory</td><td>jms/myQueue</td><td>java:comp/env/jms/myQueue</td></tr><tr><td>javax.mail.Session</td><td>mail/myMailService</td><td>java:comp/env/mail/myMailService</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-datasources"></a>Configuring DataSources</h3></div></div></div><p>Here is an example of configuring a
    <code class="code">javax.sql.DataSource</code>. Jetty can use any DataSource
    implementation available on its classpath. In this example, the DataSource
    is from the <a class="link" href="http://db.apache.org/derby" target="_top">Derby</a>
    relational database, but you can use any implementation of a
    <code class="code">javax.sql.DataSource</code>. This example configures it as scoped to
    a web app with the id of <span class="emphasis"><em> wac</em></span>:</p><div class="informalexample"><div><div id="highlighter_919253" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">Configure</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">'wac'</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.webapp.WebAppContext"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"myds"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.Resource"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">Ref</code> <code class="xml color1">refid</code><code class="xml plain">=</code><code class="xml string">"wac"</code><code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;jdbc/myds&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.apache.derby.jdbc.EmbeddedDataSource"</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"DatabaseName"</code><code class="xml plain">&gt;test&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"createDatabase"</code><code class="xml plain">&gt;create&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">Configure</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>The code above creates an instance of
    <code class="code">org.apache.derby.jdbc.EmbeddedDataSource</code>, calls the two
    setter methods <code class="code">setDatabaseName("test"),</code> and
    <code class="code">setCreateDatabase("create"),</code> and binds it into the JNDI scope
    for the web app. If you do not have the appropriate
    <code class="code">resource-ref</code> set up in your <code class="code">web.xml</code>, it is
    available from application lookups as <code class="code">
    java:comp/env/jdbc/myds</code>.</p><p>Here's an example <code class="filename">web.xml</code> declaration for the
    datasource above:</p><div class="informalexample"><div><div id="highlighter_901021" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;jdbc/myds&lt;/</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;javax.sql.DataSource&lt;/</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;Container&lt;/</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>To look up your DataSource in your <code class="filename">servlet/filter/etc.</code>:</p><div class="informalexample"><div><div id="highlighter_934184" class="syntaxhighlighter  java"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">javax.naming.InitialContext;</code></div><div class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">javax.sql.DataSource;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">MyClass {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">void</code> <code class="java plain">myMethod() {</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">InitialContext ic = </code><code class="java keyword">new</code> <code class="java plain">InitialContext();</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">DataSource myDS = (DataSource)ic.lookup(</code><code class="java string">"java:comp/env/jdbc/myds"</code><code class="java plain">);&nbsp;&nbsp;&nbsp;&nbsp; </code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">...</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code></div><div class="line number13 index12 alt2"><code class="java plain">}</code></div></div></td></tr></tbody></table></div></div></div><div xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><i class="icon-asterisk"></i> Note</h3><p>Careful! When configuring Resources, ensure that the type of
      object you configure matches the type of object you expect to look up in
      <code class="code">java:comp/env</code>. For database connection factories, this
      means that the object you register as a Resource
      <span class="emphasis"><em>must</em></span> implement the
      <code class="code">javax.sql.DataSource</code>&nbsp;interface.</p></div><p>For more examples of datasource configurations, see <a class="xref" href="http://www.eclipse.org/jetty/documentation/current/jndi-datasource-examples.html" title="Datasource Examples">Datasource Examples</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-jms-queues-topics-connectionfactories"></a>Configuring JMS Queues, Topics and ConnectionFactories</h3></div></div></div><p>Jetty can bind any implementation of the JMS destinations and
    connection factories. You just need to ensure the implementation Jars are
    available on Jetty's classpath. Here is an example of binding an <a class="link" href="http://activemq.apache.org/" target="_top">ActiveMQ</a> in-JVM connection
    factory:</p><div class="informalexample"><div><div id="highlighter_558424" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">Configure</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">'wac'</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.webapp.WebAppContext"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"cf"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.Resource"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">Ref</code> <code class="xml color1">refid</code><code class="xml plain">=</code><code class="xml string">'wac'</code><code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;jms/connectionFactory&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.apache.activemq.ActiveMQConnectionFactory"</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;<a href="vm://localhost?broker.persistent=false">vm://localhost?broker.persistent=false</a>&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">Configure</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>The entry in <code class="filename">web.xml</code> would be:</p><div class="informalexample"><div><div id="highlighter_811662" class="syntaxhighlighter  xml "><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;jms/connectionFactory&lt;/</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;javax.jms.ConnectionFactory&lt;/</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;Container&lt;/</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>TODO: put in an example of a QUEUE from progress demo</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-mail-with-jndi"></a>Configuring Mail</h3></div></div></div><p>Jetty also provides infrastructure for access to
    <code class="code">javax.mail.Sessions</code> from within an application:</p><div class="informalexample"><div><div id="highlighter_92431" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">Configure</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">'wac'</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.webapp.WebAppContext"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"mail"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.Resource"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">Ref</code> <code class="xml color1">refid</code><code class="xml plain">=</code><code class="xml string">"wac"</code><code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;mail/Session&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.jndi.factories.MailSessionReference"</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"user"</code><code class="xml plain">&gt;fred&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"password"</code><code class="xml plain">&gt;OBF:1xmk1w261z0f1w1c1xmq&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"properties"</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"java.util.Properties"</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Put</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"mail.smtp.host"</code><code class="xml plain">&gt;XXX&lt;/</code><code class="xml keyword">Put</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Put</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"mail.from"</code><code class="xml plain">&gt;me@me&lt;/</code><code class="xml keyword">Put</code><code class="xml plain">&gt;</code></div><div class="line number13 index12 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Put</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"mail.debug"</code><code class="xml plain">&gt;true&lt;/</code><code class="xml keyword">Put</code><code class="xml plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number19 index18 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">Configure</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>This setup creates an instance of the <code class="code">
    org.eclipse.jetty.jndi.factories.MailSessionReference</code> class, calls
    its setter methods to set up the authentication for the mail system, and
    populates a set of Properties, setting them on the <code class="code">
    MailSessionReference</code> instance. The result is that an application
    can look up <code class="code"> java:comp/env/mail/Session</code>&nbsp; at runtime and obtain
    access to a <code class="code">javax.mail.Session</code>&nbsp; that has the necessary
    configuration to permit it to send email via SMTP.</p><div xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><i class="icon-lightbulb"></i> Tip</h3><p>You can set the password to be plain text, or use Jetty's <a class="link" href="http://www.eclipse.org/jetty/documentation/current/configuring-security-secure-passwords.html" title="Secure Password Obfuscation">Secure Password
      Obfuscation</a> (OBF:) mechanism to make the config file a little
      more secure from prying eyes. Remember that you cannot use the other Jetty
      encryption mechanisms of MD5 and Crypt because they do not allow you to recover the original
      password, which the mail system requires.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-xa-transactions"></a>Configuring XA Transactions</h3></div></div></div><p>If you want to perform distributed transactions with your resources,
    you need a <span class="emphasis"><em>transaction manager</em></span> that supports the JTA
    interfaces, and that you can look up as <code class="code">java:comp/UserTransaction</code>
    in your webapp. Jetty does not ship with one as standard, but you can plug
    in the one you prefer. You can configure a transaction manager using the
    <a class="link" href="http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/plus/jndi/Transaction.html" target="_top">JNDI
    Transaction</a> object in a Jetty config file. The following example
    configures the <a class="link" href="http://www.atomikos.com/" target="_top">Atomikos</a>
    transaction manager:</p><div class="informalexample"><div><div id="highlighter_266007" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"tx"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.Transaction"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"com.atomikos.icatch.jta.J2eeUserTransaction"</code><code class="xml plain">/&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="configuring-links"></a>Configuring Links</h3></div></div></div><p>Generally, the name you set for your <code class="code">Resource</code> should be
    the same name you use for it in <code class="filename">web.xml</code>. For example:</p><p>In a context xml file:</p><div class="informalexample"><div><div id="highlighter_198423" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">Configure</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">'wac'</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.webapp.WebAppContext"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"myds"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.Resource"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">Ref</code> <code class="xml color1">refid</code><code class="xml plain">=</code><code class="xml string">"wac"</code><code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;jdbc/mydatasource&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.apache.derby.jdbc.EmbeddedDataSource"</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"DatabaseName"</code><code class="xml plain">&gt;test&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"createDatabase"</code><code class="xml plain">&gt;create&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">Configure</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>In <code class="filename">web.xml</code>:</p><div class="informalexample"><div><div id="highlighter_456864" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;jdbc/mydatasource&lt;/</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;javax.sql.DataSource&lt;/</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;Container&lt;/</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">injection-target</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">injection-target-class</code><code class="xml plain">&gt;com.acme.JNDITest&lt;/</code><code class="xml keyword">injection-target-class</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">injection-target-name</code><code class="xml plain">&gt;myDatasource&lt;/</code><code class="xml keyword">injection-target-name</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">injection-target</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>However, you can refer to it in <code class="filename">web.xml</code> by a different
    name, and link it to the name in your <code class="code">
    org.eclipse.jetty.plus.jndi.Resource</code> by using an
    <code class="code">org.eclipse.jetty.plus.jndi.Link</code>. For the example above, you
    can refer to the <code class="code">jdbc/mydatasource</code> resource as <code class="code">
    jdbc/mydatasource1</code> as follows:</p><p>In a context xml file declare <code class="code">jdbc/mydatasource</code>:</p><div class="informalexample"><div><div id="highlighter_148551" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">Configure</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">'wac'</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.webapp.WebAppContext"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"myds"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.Resource"</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">Ref</code> <code class="xml color1">refid</code><code class="xml plain">=</code><code class="xml string">"wac"</code><code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;jdbc/mydatasource&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.apache.derby.jdbc.EmbeddedDataSource"</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"DatabaseName"</code><code class="xml plain">&gt;test&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Set</code> <code class="xml color1">name</code><code class="xml plain">=</code><code class="xml string">"createDatabase"</code><code class="xml plain">&gt;create&lt;/</code><code class="xml keyword">Set</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="xml plain">&lt;/</code><code class="xml keyword">Configure</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>Then in a <code class="filename">WEB-INF/jetty-env.xml</code> file, link the
    name <code class="code">jdbc/mydatasource</code> to the name you want to reference it
    as in <code class="filename">web.xml</code>, which in this case is
    <code class="code">jdbc/mydatasource1</code>:</p><div class="informalexample"><div><div id="highlighter_28082" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">New</code> <code class="xml color1">id</code><code class="xml plain">=</code><code class="xml string">"map1"</code> <code class="xml color1">class</code><code class="xml plain">=</code><code class="xml string">"org.eclipse.jetty.plus.jndi.Link"</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&lt;</code><code class="xml keyword">Ref</code> <code class="xml color1">refid</code><code class="xml plain">=</code><code class="xml string">'wac'</code><code class="xml plain">/&gt;&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;jdbc/mydatasource1&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt; </code><code class="xml comments">&lt;!-- name in web.xml --&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;jdbc/mydatasource&lt;/</code><code class="xml keyword">Arg</code><code class="xml plain">&gt;&nbsp; </code><code class="xml comments">&lt;!-- name in container environment --&gt;</code></div><div class="line number5 index4 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">New</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>Now you can refer to <code class="code">jdbc/mydatasource1</code> in the
    <code class="filename">web.xml</code> like this:</p><div class="informalexample"><div><div id="highlighter_40502" class="syntaxhighlighter  xml"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;jdbc/mydatasource1&lt;/</code><code class="xml keyword">res-ref-name</code><code class="xml plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;javax.sql.DataSource&lt;/</code><code class="xml keyword">res-type</code><code class="xml plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;Container&lt;/</code><code class="xml keyword">res-auth</code><code class="xml plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">injection-target</code><code class="xml plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">injection-target-class</code><code class="xml plain">&gt;com.acme.JNDITest&lt;/</code><code class="xml keyword">injection-target-class</code><code class="xml plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="xml spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="xml plain">&lt;</code><code class="xml keyword">injection-target-name</code><code class="xml plain">&gt;myDatasource&lt;/</code><code class="xml keyword">injection-target-name</code><code class="xml plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="xml spaces">&nbsp;&nbsp;</code><code class="xml plain">&lt;/</code><code class="xml keyword">injection-target</code><code class="xml plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="xml plain">&lt;/</code><code class="xml keyword">resource-ref</code><code class="xml plain">&gt;</code></div></div></td></tr></tbody></table></div></div></div><p>This can be useful when you cannot change a JNDI resource directly in
    the <code class="filename">web.xml</code> but need to link it to a specific
    resource in your deployment environment.</p></div></div><script type="text/javascript">
      SyntaxHighlighter.all()
    </script><div class="navfooter"><hr><table summary="Navigation footer" width="100%"><tbody><tr><td width="40%" align="left"><a accesskey="p" href="http://www.eclipse.org/jetty/documentation/current/using-jetty-jndi.html"><i class="icon-chevron-left"></i> Previous</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="http://www.eclipse.org/jetty/documentation/current/jndi.html"><i class="icon-chevron-up"></i> Top</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="http://www.eclipse.org/jetty/documentation/current/jndi-embedded.html">Next <i class="icon-chevron-right"></i></a></td></tr><tr><td valign="top" width="40%" align="left">Working with Jetty JNDI&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="http://www.eclipse.org/jetty/documentation/current/index.html"><i class="icon-home"></i> Home</a></td><td valign="top" width="40%" align="right">&nbsp;Using JNDI with Jetty Embedded</td></tr></tbody></table></div><p xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times"></p><div class="jetty-callout">
            See an error or something missing?
            <span class="callout"><a href="http://github.com/jetty-project/jetty-documentation">Contribute to this documentation at
                <span class="website"><i class="icon-github"></i> Github!</span></a></span><span style="float: right"><i>(Generated: 2016-02-25)</i></span></div><p></p><script xmlns:jfetch="java:org.eclipse.jetty.xslt.tools.JavaSourceFetchExtension" xmlns:fetch="java:org.eclipse.jetty.xslt.tools.SourceFetchExtension" xmlns:d="http://docbook.org/ns/docbook" xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0" xmlns:xslthl="http://xslthl.sf.net" xmlns:gcse="http://www.google.com" xmlns:date="http://exslt.org/dates-and-times" type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1149868-7']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
    </script><table class="gstl_50 gssb_c" style="width: 253px; display: none; top: 47px; left: 369px; position: absolute;" cellpadding="0" cellspacing="0"><tbody><tr><td class="gssb_f"></td><td style="width: 100%;" class="gssb_e"></td></tr></tbody></table></body></html>